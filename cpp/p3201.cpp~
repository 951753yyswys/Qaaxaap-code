#include<bits/stdc++.h>
#define int long long
using namespace std;
struct tree
{
	int l,r,sum,lc,rc;
} t[10000100];
int cnt,rt[1000100],color[100010];
void pushup(int ro)
{
	int ls=t[ro].l,rs=t[ro].r;
	if(t[ls].lc!=0) t[ro].lc=t[ls].lc;
	else t[ro].lc=t[rs].lc;
	if(t[rs].rc!=0) t[ro].rc=t[rs].rc;
	else t[ro].rc=t[ls].rc;
	t[ro].sum=t[ls].sum+t[rs].sum;
	if(t[ls].rc+1==t[rs].lc) t[ro].sum--;
}
void update(int &ro,int l,int r,int u)
{
	if(!ro) ro=++cnt;
	if(l==r)
	{
		 t[ro].lc=u;
		 t[ro].rc=u;
		 t[ro].sum=1;
		 return;
	}
	int mid=l+r>>1;
	if(u<=mid) update(t[ro].l,l,mid,u);
	else update(t[ro].r,mid+1,r,u);
	pushup(ro);
} 
void merge(int &lr,int &rr,int l,int r)
{
	if(min(lr,rr)<=0)
	{
		lr+=rr;
		return;
	}	
	if(l==r)
	{
		t[lr].lc=t[lr].rc=l;
		t[lr].sum=1;
		return;
	}
	int mid=l+r>>1;
	merge(t[lr].l,t[rr].l,l,mid);
	merge(t[lr].r,t[rr].r,mid+1,r);
	pushup(lr);
}
signed main()
{
	int n,m,ans=0;
	cin>>n>>m;
	for(int i=1;i<=n;i++)
	{
		int col;
		cin>>col;
		ans-=t[rt[col]].sum;
		update(rt[col],1,n,i);
		ans+=t[rt[col]].sum;
	}
	for(int i=1;i<=m;i++)
	{
		int opt;
		cin>>opt;
		if(opt==1)
		{
			int x,y;
			cin>>x>>y;
			if(x!=y)
			{
				ans-=t[rt[x]].sum;
				ans-=t[rt[y]].sum;
				merge(rt[x],rt[y],1,n);
				ans+=t[rt[y]].sum;
				rt[x]=0;
			}	
		}
		else cout<<ans<<endl;
	}
	return 0;
}
