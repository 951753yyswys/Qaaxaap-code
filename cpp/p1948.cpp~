#include<bits/stdc++.h>
using namespace std;
struct edge
{
	int to,nxt,w;
} e[1001001];
int head[100100],vis[1010],dis[1010],cnt,n,p,k;
inline void add(int u,int v,int w)
{
	cnt++;
	e[cnt].to=v;
	e[cnt].nxt=head[u];
	e[cnt].w=w;
	head[u]=cnt;
}
bool check(int x)
{
	memset(dis,0x3f,sizeof(dis));
	memset(vis,0,sizeof(vis));
	deque<int> q;
	q.push_back(1);
	dis[1]=0;
	while(!q.empty())
	{
		int u=q.front();
		int ro=u;
		q.pop_front();
		if(vis[ro]) continue;
		vis[ro]=1;
		for(int i=head[ro];i;i=e[i].nxt)
		{
			int v=e[i].to,w=e[i].w;
			if(w>x) w=1;
			else w=0;
			if(dis[u]+w<dis[v]) 
			{
				dis[v]=dis[u]+w;
				if(w==0) q.push_front(v);
				else q.push_back(v);
			}
		}
	}
	if(dis[n]<=k) return true;
	return false;
}
int main()
{
	cin>>n>>p>>k;
	for(int i=1;i<=p;i++)
	{
		int u,v,w;
		cin>>u>>v>>w;
		add(u,v,w);
		add(v,u,w);
	}
	int ans=-1,l=1,r=1000100;
	while(l<=r)
	{
		int mid=l+r>>1;
		if(check(mid))
		{
			ans=mid;
			r=mid-1;
		}
		else l=mid+1;
	}
	cout<<ans;
	return 0;
}
